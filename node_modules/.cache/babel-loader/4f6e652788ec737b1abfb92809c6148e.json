{"ast":null,"code":"var _jsxFileName = \"E:\\\\xampp\\\\htdocs\\\\my-app\\\\src\\\\components\\\\Pages\\\\Card.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport FormData from 'form-data';\nimport getTotal from \"../General/getTotal\";\nimport Config from \"../Config/Config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Card extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = async () => {\n      const s_storage = window.localStorage,\n            array_name = s_storage.getItem('user_cart');\n\n      if (array_name) {\n        const product_ids_ = [];\n        const ids_data = JSON.parse(array_name);\n\n        for (let key in ids_data) {\n          product_ids_.push(key);\n        }\n\n        const product_ids = product_ids_.join(',');\n        const data = new FormData();\n        data.append('get_basket', 'true');\n        data.append('ids', product_ids);\n        const config2 = {\n          method: 'post',\n          url: Config().ApiUrl,\n          headers: {},\n          data: data\n        };\n        const product_list = await axios(config2);\n        const products = [];\n        var sub_total = 0;\n\n        for (let key in product_list.data.data) {\n          let row = product_list.data.data[key];\n          let discount = row.metas.discount,\n              price = row.metas.price,\n              discount_start_date = new Date(row.metas.discount_start_date),\n              discount_end_date = new Date(row.metas.discount_end_date),\n              now_date = new Date(),\n              calc_discount = price * (100 - discount) / 100;\n          let has_discount = discount_start_date <= now_date && discount_end_date >= now_date ? true : false;\n          let new_price = has_discount ? calc_discount : price;\n          let qty = ids_data[row.id];\n          products.push({\n            id: row.id,\n            title: row.title,\n            featured: row.featured,\n            link: \"/products/\" + row.slug,\n            has_discount: has_discount,\n            discount: discount,\n            price: price,\n            new_price: new_price,\n            fav_page: true,\n            qty: qty\n          });\n          sub_total += new_price * qty;\n        }\n\n        this.setState({\n          product_list: products,\n          sub_total: sub_total\n        });\n      }\n    };\n\n    this.removeItem = (product_id, e) => {\n      const ask = window.confirm('Seçilən məhsulu silək?');\n\n      if (ask) {\n        const s_storage = window.localStorage,\n              array_name = s_storage.getItem('user_cart'),\n              old_data = JSON.parse(array_name);\n\n        if (old_data[product_id]) {\n          delete old_data[product_id];\n          const new_data = old_data;\n          s_storage.setItem('user_cart', JSON.stringify(new_data));\n          this.componentDidMount();\n        }\n      }\n    };\n\n    this.state = {\n      product_list: [],\n      sub_total: 0,\n      title: '',\n      content: '',\n      excerpt: '',\n      email: '',\n      tel: '',\n      showErrorMessage: false,\n      successMessage: '',\n      showSuccessMessage: false\n    };\n  }\n\n  render() {\n    const {\n      product_list,\n      sub_total\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      class: \"full_w card_page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"full_w card_area\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"full_w card_contain\",\n            children: [product_list.length == 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"S\\u0259b\\u0259tiniz bo\\u015Fdu!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 61\n            }, this) : null, product_list.length > 0 ? /*#__PURE__*/_jsxDEV(\"table\", {\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    class: \"card-head\",\n                    children: \"Products\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Quantity\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 9\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 8\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 7\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: product_list.map((product, index) => {\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      class: \"card_item\",\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        src: product.featured,\n                        alt: product.title,\n                        title: product.title\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 161,\n                        columnNumber: 9\n                      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: product.title\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 162,\n                        columnNumber: 10\n                      }, this)]\n                    }, product.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 160,\n                      columnNumber: 9\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      class: \"card-price\",\n                      children: product.new_price\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 9\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      class: \"card-quantity\",\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        name: \"number\",\n                        min: 1,\n                        max: 100,\n                        value: product.qty\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 166,\n                        columnNumber: 9\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 165,\n                      columnNumber: 9\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      class: \"card-total\",\n                      children: product.new_price * product.qty\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 9\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      class: \"card-close\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        onClick: this.removeItem.bind(this, product.id),\n                        children: \"\\xD7\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 173,\n                        columnNumber: 10\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 172,\n                      columnNumber: 9\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 8\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 7\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 7\n            }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"card_btn\",\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"/\",\n                class: \"card_b card_shop\",\n                children: \"CONTINUE SHOPPING\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 8\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"#\",\n                class: \"card_b card_update\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  class: \"fas fa-spinner\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 47\n                }, this), \"  UPDATE CARD \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 8\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"card_checkout\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Card Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 18\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [\"Subtotal \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [sub_total, \"$\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 22\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 9\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"#\",\n                class: \"procced_b\",\n                children: \"PROCEED TO CHECKOUT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 8\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 4\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 3\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["E:/xampp/htdocs/my-app/src/components/Pages/Card.js"],"names":["React","Component","axios","FormData","getTotal","Config","Card","constructor","props","componentDidMount","s_storage","window","localStorage","array_name","getItem","product_ids_","ids_data","JSON","parse","key","push","product_ids","join","data","append","config2","method","url","ApiUrl","headers","product_list","products","sub_total","row","discount","metas","price","discount_start_date","Date","discount_end_date","now_date","calc_discount","has_discount","new_price","qty","id","title","featured","link","slug","fav_page","setState","removeItem","product_id","e","ask","confirm","old_data","new_data","setItem","stringify","state","content","excerpt","email","tel","showErrorMessage","successMessage","showSuccessMessage","render","length","map","product","index","bind"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\r\nimport axios from 'axios';\r\nimport FormData from 'form-data';\r\nimport getTotal from \"../General/getTotal\";\r\nimport Config from \"../Config/Config\";\r\n\r\n\r\n\r\nexport default class Card extends Component{\r\n\tconstructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            product_list: [],\r\n            sub_total : 0,\r\n            title : '',\r\n            content : '',\r\n            excerpt : '',\r\n            email : '',\r\n            tel : '',\r\n            showErrorMessage : false,\r\n            successMessage : '',\r\n            showSuccessMessage : false,\r\n        };\r\n    }\r\n\r\n\r\n\r\n\tcomponentDidMount = async () => {\r\n\t\t\r\n\t\tconst s_storage=window.localStorage,\r\n\t\tarray_name=s_storage.getItem('user_cart');\r\n\r\n\r\n\tif(array_name){\r\n\t\tconst product_ids_=[];\r\n\t\tconst ids_data=JSON.parse(array_name);\r\n\r\n\t\tfor(let key in ids_data){\r\n\t\t\tproduct_ids_.push( key );\r\n\t\t}\r\n\r\n\r\n\t\tconst product_ids=product_ids_.join(',');\r\n\r\n\r\n\t\tconst data = new FormData();\r\n\t\tdata.append('get_basket', 'true');\r\n\t\tdata.append('ids', product_ids);\r\n\r\n\t\tconst config2 = {\r\n\t\t\tmethod: 'post',\r\n\t\t\turl: Config().ApiUrl,\r\n\t\t\theaders: {},\r\n\t\t\tdata : data\r\n\t\t};\r\n\r\n\t\tconst product_list = await axios(config2);\r\n\r\n\t\tconst products = [];\r\n\r\n\t\tvar sub_total=0;\r\n\r\n\t\tfor (let key in product_list.data.data){\r\n\t\t\tlet row=product_list.data.data[key];\r\n\r\n\t\t\tlet discount=row.metas.discount,\r\n\t\t\t\tprice=row.metas.price,\r\n\t\t\t\tdiscount_start_date=new Date(row.metas.discount_start_date),\r\n\t\t\t\tdiscount_end_date=new Date(row.metas.discount_end_date),\r\n\t\t\t\tnow_date=new Date(),\r\n\t\t\t\tcalc_discount=(price * (100 - discount)) / 100;\r\n\r\n\t\t\tlet has_discount=(discount_start_date <= now_date && discount_end_date >= now_date) ? true : false;\r\n\t\t\tlet new_price=(has_discount) ? calc_discount : price;\r\n\r\n\t\t\tlet qty = ids_data[row.id];\r\n\r\n\t\t\tproducts.push({\r\n\t\t\t\tid : row.id,\r\n\t\t\t\ttitle : row.title,\r\n\t\t\t\tfeatured : row.featured,\r\n\t\t\t\tlink : \"/products/\"+row.slug,\r\n\t\t\t\thas_discount : has_discount,\r\n\t\t\t\tdiscount : discount,\r\n\t\t\t\tprice : price,\r\n\t\t\t\tnew_price : new_price,\r\n\t\t\t\tfav_page : true,\r\n\t\t\t\tqty : qty\r\n\t\t\t});\r\n\r\n\t\t\tsub_total += new_price * qty;\r\n\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tproduct_list : products,\r\n\t\t\tsub_total : sub_total\r\n\t\t});\r\n\r\n\r\n\t}\r\n}; \r\n\r\n\t\r\nremoveItem = (product_id, e) => {\r\n\tconst ask=window.confirm('Seçilən məhsulu silək?');\r\n\r\n\tif (ask){\r\n\r\n\t\tconst s_storage=window.localStorage,\r\n\t\t\tarray_name=s_storage.getItem('user_cart'),\r\n\t\t\told_data=JSON.parse(array_name);\r\n\r\n\t\tif (old_data[product_id]){\r\n\r\n\t\t\tdelete  old_data[product_id];\r\n\r\n\t\t\tconst new_data=old_data;\r\n\r\n\r\n\t\t\ts_storage.setItem('user_cart', JSON.stringify(new_data));\r\n\r\n\t\t\tthis.componentDidMount();\r\n\r\n\t\t}\r\n\r\n\t}\r\n  };\r\n\r\n    render(){\r\n\t\tconst {product_list, sub_total} = this.state;\r\n        return(\r\n            <section class=\"full_w card_page\">\r\n\t\t<div class=\"full_w card_area\">\r\n\t\t\t<div class=\"center\">\r\n\t\t\t\t<div class=\"full_w card_contain\">\r\n\t\t\t\t{\r\n                                (product_list.length ==0) ? <span>Səbətiniz boşdu!</span> : null\r\n                }\r\n\r\n\t\t\t\t {\r\n\t\t\t\t\t (product_list.length > 0) ?\r\n\r\n\t\t\t\t\t <table>\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th class=\"card-head\">Products</th>\r\n\t\t\t\t\t\t\t\t<th>Price</th>\r\n\t\t\t\t\t\t\t\t<th>Quantity</th>\r\n\t\t\t\t\t\t\t\t<th>Total</th>\r\n\t\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tproduct_list.map( (product,index) =>{\r\n\t\t\t\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td class=\"card_item\" key={product.id}>\r\n\t\t\t\t\t\t\t\t<img src={product.featured} alt={product.title} title={product.title} />\r\n\t\t\t\t\t\t\t\t\t<h5>{product.title}</h5>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td class=\"card-price\">{product.new_price}</td>\r\n\t\t\t\t\t\t\t\t<td class=\"card-quantity\">\r\n\t\t\t\t\t\t\t\t<input type=\"number\" name=\"number\" min={1} max={100} value={product.qty} />\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td class=\"card-total\">\r\n\t\t\t\t\t\t\t\t{product.new_price * product.qty}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td class=\"card-close\">\r\n\t\t\t\t\t\t\t\t\t<span onClick={this.removeItem.bind(this, product.id)}>&times;</span>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table> : null\r\n\t\t\t\t }\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t<div class=\"card_btn\">\r\n\t\t\t\t\t\t\t<a href=\"/\" class=\"card_b card_shop\">CONTINUE SHOPPING</a>\r\n\t\t\t\t\t\t\t<a href=\"#\" class=\"card_b card_update\"><i class=\"fas fa-spinner\"></i>  UPDATE CARD </a>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"card_checkout\">\r\n\t\t\t              <h5>Card Total</h5>\r\n\t\t\t              \r\n\t\t\t\t\t\t\t <ul>\r\n\t\t\t\t\t\t\t\t<li>Subtotal <span>{sub_total}$</span> </li>\r\n\t\t\t\t\t\t\t</ul> \r\n\t\t\t                \r\n\t\t\t\t\t\t\t<a href=\"#\" class=\"procced_b\">PROCEED TO CHECKOUT</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</section>\r\n        )\r\n    }\r\n\r\n}"]},"metadata":{},"sourceType":"module"}